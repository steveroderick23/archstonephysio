if(!Object.keys){Object.keys=(function(){var c=Object.prototype.hasOwnProperty,d=!({toString:null}).propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=b.length;return function(g){if(typeof g!=="object"&&(typeof g!=="function"||g===null)){throw new TypeError("Object.keys called on non-object")}var e=[],h,f;for(h in g){if(c.call(g,h)){e.push(h)}}if(d){for(f=0;f<a;f++){if(c.call(g,b[f])){e.push(b[f])}}}return e}}())}jQuery.fn.getViewportDistance=function(a){var b=0;jQuery(this).each(function(){var e=0;var c=jQuery(window).scrollTop();var h=c+jQuery(window).height();var d=jQuery(this).offset().top;var g=d+jQuery(this).height();if(h<d){e=(a?g:d)-h}else{if(c>g){e=c-(a?d:g)}else{if(a){var f=d-c;var i=h-g;e=Math.max(f,i)}}}b=Math.max(b,e)});return b};var TJ=new function(){var i=0;var g=this;var f={};var e=null;var a={};var b={};var d="tj";var h;function j(){if(window.debugMode&&window.console&&typeof console.log==="function"){g=console;f.trace=console.log;f.info=console.info||console.log;f.warning=console.warn||console.log;f.error=console.error||console.log;f.dump=console.dir||console.log;e=console.trace||c}else{f.trace=c;f.info=c;f.warning=c;f.error=c;f.dump=c;e=c}a.log("TJ initialized","info","js.TJ")}function c(l){return}function k(n,o,m,l){if(!TJUI){return}TJUI.addYiiLog(n,o,m,l)}a.t=function(m,l){if(!l){l=m;m="default"}var n=l;if(b[m]&&b[m][l]){n=b[m][l]}return n};a.setTranslations=function(m,n){TJ.log("Adding translations for category : "+m,"trace","js.TJ");if(!b[m]){b[m]={}}var l;for(l in n){b[m][l]=n[l]}};a.showTranslations=function(l){console.log(b[l])};a.log=function(n,p,m,l){if(!window.debugMode){return}if(typeof n!=="string"){return f.dump.apply(g,[n])}p=p||"info";m=m||"js.unknown";if(m.substring(0,3)!=="js."){return k(n,p,m,l)}var o=false;switch(p){case"error":case"warning":case"info":k(n,p,m,l);case"trace":break;default:f.trace.apply(g,[n])}if(o){e()}};a.trace=function(){e()};a.dump=function(l){f.dump.apply(g,[l])};a.id=function(l){l=l||"id";return l+"-"+(++i)};a.matchRoute=function(m){var p,n,q,l,o,r=m.split("/");if(!h){q=$("body");if(!q.length){throw"Body not loaded yet"}l=$("body").attr("class");if(!/(^|\s)controller-/i.test(l)||!/(^|\s)action-/i.test(l)){throw"Not a route-specified page"}else{if(!/(^|\s)module-/i.test(l)){l+=" module-"+d}}h=l}else{l=h}if(r.length==2){r.unshift(d)}else{if(r.length!=3){throw"Invalid arguments"}}o={module:r[0],controller:r[1],action:r[2]};for(n in o){p=new RegExp("(^|\\s)"+n+"-"+o[n].replace("*",".*")+"(\\s|$)","i");if(!p.test(h)){return false}}return true};j();return a}();var TJGateway=new function(){var a={};function i(){jQuery.ajaxPrefilter(h);TJ.log("TJGateway initialized","info","js.TJGateway")}function j(){}function f(){}function h(n,k,o){if(!n.global){TJ.log("Ignoring stealth request","trace","js.TJGateway");return}var l={requestId:TJ.id(n.url),originalSettings:k,jqXHR:o,viewHandled:n.manualOnly||false,errorHandled:n.manualOnly||false,redirectHandled:n.manualOnly||false,messagesHandled:n.manualOnly||false,reachedSuccess:false,reachedError:false};TJ.log(l.requestId+": ajaxPrefilter","trace","js.TJGateway");if(!k.type){n.type="POST"}var p=SYNCRONEX_LOGON_URL;if(n.crossDomain&&n.url!=p){n.url="/proxyAjax/proxy?url="+encodeURIComponent(n.url);n.crossDomain=false}n.data=k.data||{};n.data.isAjax=1;n.data.pageUrl=encodeURIComponent(window.location.pathname);n.dataType=k.dataType||"json";if(typeof n.data!="string"){n.data=jQuery.param(n.data)}if(typeof n.context==="string"){var m=TJUI.getPlaceholder();l.originalContext=jQuery(n.context).first();jQuery(n.context).first().replaceWith(m);l.context=m}o.done(e);if(n.success){o.done(n.success);delete n.success}o.fail(c);if(n.error){o.fail(n.error);delete n.error}o.always(b);if(typeof n.complete==="function"){l.firstComplete=n.complete;delete n.complete}l.beforeCompletes=[];if(typeof n.finish==="function"){l.beforeCompletes.push(n.finish);delete n.finish}o.alwaysFirst=function(){var r,q;for(r=0,q=arguments.length;r<q;r++){if(typeof arguments[r]!=="function"){continue}l.beforeCompletes.push(arguments[r])}return this};l.settings=n;o.requestInfo=l}function e(m,n,l){var k=l.requestInfo;TJ.log(k.requestId+": ajaxBeforeSuccess","trace","js.TJGateway");k.reachedSuccess=true;k.textStatus=n;if(k.settings.dataType=="json"&&m&&typeof m.format==="string"){l.responseJSON=m;k.data=m}}function c(m,p,k){var l=m.requestInfo;TJ.log(l.requestId+": ajaxBeforeError","warning","js.TJGateway");l.reachedError=true;l.textStatus=p;l.error=k;if(m.readyState==4&&m.responseText&&l.settings.dataType=="json"){try{var n=JSON.parse(m.responseText);if(n&&typeof n.format==="string"){m.responseJSON=n;l.data=n}}catch(o){TJ.log("Response parse error: "+o.message,"error","js.TJGateway");return}}TJ.log(k.message,"error","js.TJGateway")}function b(){var p,o,w,s,l,u=TJGateway.findRequest(arguments);var v=u.jqXHR,m=u.settings,x=d(arguments);TJ.log(u.requestId+": ajaxOnComplete (on readyState "+v.readyState+")","info","js.TJGateway");if(typeof u.firstComplete==="function"){u.firstComplete(v,u.textStatus)}for(p=0,o=u.beforeCompletes.length;p<o;p++){try{u.beforeCompletes[p].apply(this,arguments)}catch(t){TJ.log(t.message,"error","tj.TJGateway.beforeCompletes")}}if(!x){g(u);return TJ.log("Legacy AJAX response received from "+m.url,"warning","js.TJGateway")}TJ.log("Begin "+m.url,"info","js.TJGateway");if(v.status>=400){TJ.log("HTTP error "+v.status,"error","js.TJGateway");if(!u.errorHandled){switch(v.status){case 400:case 401:case 403:case 404:case 409:s="/error/"+v.status;break;default:s="/error/500"}}}try{var n,k=x.logs||[];for(p in k){n=k[p];TJ.log(n[0],n[1],n[2],new Date(n[3]*1000))}if(!x.success){var r="Data response error "+x.errorCode;if(x.errorMessage){r+="\n"+x.errorMessage}TJ.log(r,"error","js.TJGateway")}}catch(t){TJ.log(t.message,"error","js.TJGateway")}if(!u.messagesHandled&&x.messages){u.messagesHandled=true;TJUI.showMessages(x.messages)}if(!u.redirectHandled&&x.redirectUrl){u.redirectHandled=true;s=x.redirectUrl}if(!u.errorHandled&&x.errorCode){u.errorHandled=true;if(x.errorMessage){l=true}}if(!u.viewHandled&&x&&x.format=="html"&&x.view){if(x.context){u.viewHandled=true;jQuery(x.context).first().replaceWith(x.view)}else{if(u.context){u.viewHandled=true;u.context.replaceWith(x.view)}}}g(u);var q;if(s){if(window.debugMode){q=function(){if(confirm("Redirect?: "+s)){window.location.pathname=s}}}else{q=function(){window.location.pathname=s}}}if(l){TJUI.errorModal(x.errorMessage,q,x.errorDetail)}else{if(q){q()}}TJ.log("End "+m.url,"info","js.TJGateway")}function g(k){if(k.context){if(!k.viewHandled&&k.originalContext){k.context.replaceWith(k.originalContext)}else{k.context.detach()}}delete k.context;delete k.originalContext}function d(m){var n,l,k;for(n=0,l=m.length;n<l;n++){k=m[n];if(typeof k!="object"){continue}if(typeof k.success!="undefined"&&typeof k.errorCode!="undefined"){return k}if(typeof k.responseJSON=="object"){return d([k.responseJSON])}}return false}a.findRequest=function(l){var m,k;for(m=0,k=l.length;m<k;m++){if(typeof l[m]=="object"&&l[m].requestInfo){return l[m].requestInfo}}TJ.log("Unable to find the request object","error","js.TJGateway")};a.findResponse=function(k){var l=a.findRequest(k)||{};return l.data||{}};i();return a}();var TJUI=new function(){var h;var e;var c=null;var d=[];var j={info:"#FFFFDF",error:"#FFC0CB",warning:"#FFDFE5",defaultCycle:["#F5F5F5","#FFFFFF"]};var f=0;var b={};var a="";b.url={};function g(){var l=[self.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,self.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop];var m=jQuery("html");m.data("scroll-position",l);m.data("previous-overflow",m.css("overflow"));m.css("overflow","hidden");window.scrollTo(l[0],l[1])}function i(){var m=jQuery("html");var l=m.data("scroll-position");m.css("overflow",m.data("previous-overflow"));window.scrollTo(l[0],l[1])}b.url.getPathValue=function(m){var o=window.location.pathname,n=RegExp("/"+m+"/([^/]+)"),l=n.exec(o);if(l){return l[1]}return""};b.url.pushState=function(m){var p,l,o,q,n,r=window.location.href;if(r.slice(-1)=="/"){r=r.slice(0,-1)}for(p in m){l=b.url.getPathValue(p);o=m[p];q="/"+p+"/"+l;n="/"+p+"/"+o;if(l&&o){r=r.replace(q,n)}else{if(l&&!o){r=r.replace(q,"")}else{if(!l&&o){r+=n}}}}if(window.location.href!=r){window.history.pushState(m,"",r);return true}return false};b.addYiiLog=function(o,r,n,m){if(!window.debugMode){return}r=r||"info";m=m||new Date();var p=TJDate.format(m,"YiiLogTime");n=n||"js.unknown";if(!h||!h.length){h=jQuery("table.yiiLog > tbody").first()}if(!f){f=h.children().length}f++;var l=j[r]||j.defaultCycle[f%2];var q='<tr style="background:'+l+'"><td align="center">'+p+"</td><td>"+r+"</td><td>"+n+"</td><td><pre>"+o+"</pre></td></tr>";h.append(q)};b.getPlaceholder=function(n){n=n||a;var l=n.length?"activity placeholder":"activity throbber";if(n.length){}var m=TJ.id("activity");return jQuery('<div id="'+m+'" class="'+l+'">'+n+"</div>")};b.modal=function(p,l,o){var s={timing:300,cssOptions:{},overlayCssOptions:{},animationType:"js",onModalOpen:function(){},onModalClose:function(){},closeIdentifier:".tj-close-modal",applyClass:false,zIndex:5001};var q=jQuery.extend({},s,o);var r=navigator.appVersion.indexOf("MSIE 8.")!==-1;var n=jQuery(document.createElement("div")).addClass("tj-modal");jQuery("body").append(n);if(r){n.css({"margin-left":"-"+n.outerWidth()/2+"px","margin-top":"-"+n.outerHeight()/2+"px"})}n.html(p).css(q.cssOptions).css({"z-index":q.zIndex+1});var m=jQuery(document.createElement("div")).addClass("tj-modal-overlay tj-menu-ignore");if(q.applyClass){n.addClass(q.applyClass);m.addClass(q.applyClass)}jQuery("body").append(m);m.click(function(){b.modal.closeModal(n,q.timing);q.onModalClose.call(l)}).css(q.overlayCssOptions).css({"z-index":q.zIndex}).data("modal",n);n.data("overlay",m);if(l){l.click(function(t){if(l.data("tj-modal-enabled")){t.preventDefault();b.modal.openModal(n,q.timing);q.onModalOpen.call(l)}}).data("has-tj-modal",true).data("tj-modal-enabled",true)}else{b.modal.openModal(n,q.timing)}n.on("click",q.closeIdentifier,function(t){t.preventDefault();b.modal.closeModal(n,q.timing);q.onModalClose.call(l)});return n};b.modal.hasModal=function(l){return l.data("has-tj-modal")};b.modal.enable=function(l){l.data("tj-modal-enabled",true)};b.modal.disable=function(l){l.data("tj-modal-enabled",false)};b.modal.isEnabled=function(l){return l.data("tj-modal-enabled")};b.modal.openModal=function(m,l){g();m.fadeIn(l);m.data("overlay").fadeIn(l);jQuery(":focus").blur()};b.modal.closeModal=function(m,l){m.fadeOut(l);m.data("overlay").fadeOut(l);i()};b.notify=function(m,l,n){if(!l){l="info"}b.showMessages([[l,m,n]])};b.showMessages=function(n){var l=window.moduleName;if(!window.debugMode&&(!l||l=="app"||l=="tj"||l=="mainsite")){return}if(n&&n.length){d=d.concat(n);if(c===null){k()}}};function k(){clearTimeout(c);c=null;if(!window.toastr){return}var m=d.shift();if(!m){return}var l=m[0];toastr[l](m[1],m[2]);c=setTimeout(k,750)}b.errorModal=function(o,l,n){if(n&&window.debugMode){o=""+o+"<br><br>"+n}var m={};var m={applyClass:"error"};if(typeof l=="function"){m.onModalClose=l}TJUI.modal(o,false,m)};return b}();var TJDate=new function(){var b={ISO8601Long:"Y-m-d\\TH:i:sO",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d H:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y",YiiLogTime:"H:i:s.u"};var f={};var h={};var e={monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y2kYear:50,timezone:function(j){return j.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3").replace(/^.*?[0-9]{4} \(([A-Z]{3})\)/,"$1")},GMTOffset:function(j,k){if(!k){k=""}return(j.getTimezoneOffset()>0?"-":"+")+pad(Math.floor(j.getTimezoneOffset()/60))+k+pad(j.getTimezoneOffset()%60)},parseTZOffset:function(k){if(k=="Z"){return 0}var j;j=parseInt(k[0]+k[1]+k[2])*3600;if(k[3]==":"){j+=parseInt(k[4]+k[5])*60}else{j+=parseInt(k[3]+k[4])*60}return j},dayOfYear:function(k){var l,j=0;var m=[31,(isLeapYear(k)?29:28),31,30,31,30,31,31,30,31,30,31];for(l=0;l<k.getMonth()();++l){j+=m[l]}return j+k.getDate()-1},weekOfYear:function(l){var k=dayOfYear(l)+(4-l.getDay()());var j=new Date(l.getFullYear(),0,1);var m=(7-j.getDay()()+4);return pad(((k-m)/7)+1)},isLeapYear:function(j){var k=j.getFullYear();return((k&3)==0&&(k%100||(k%400==0&&k)))},daysInMonth:function(j){var k=[31,(isLeapYear(j)?29:28),31,30,31,30,31,31,30,31,30,31];return k[j.getMonth()()]},suffix:function(j){switch(j.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},pad:function(l,j,k){l=l.toString().split("");if(!j){j=2}if(!k){k="0"}while(l.length<j){l.unshift(k)}return l.join("")},rpad:function(l,j,k){l=l.toString().split("");if(!j){j=2}if(!k){k="0"}while(l.length<j){l.push(k)}return l.join("")}};var g={am:"am|pm",d1:"\\d",d2:"\\d{1,2}",d3:"\\d{1,3}",d4:"\\d{1,4}",d02:"\\d{2}",d03:"\\d{3}",d04:"\\d{4}",d06:"\\d{6}",offset:"Z|[+-]\\d{2}:?\\d{2}",p:function(j){return j+"=parseInt(result, 10)"}};var i={d:{g:"this.pad(date.getDate())",r:g.d2,p:g.p("d")},D:{g:"this.dayShortNames[date.getDay()]",r:e.dayShortNames.join("|")},j:{g:"date.getDate()",r:g.d2,p:g.p("d")},l:{g:"this.dayNames[date.getDay()]",r:e.dayNames.join("|")},S:{g:"this.suffix(date)",r:"st|nd|rd|th"},w:{g:"date.getDay()",r:g.d1},z:{g:"this.dayOfYear(date)",r:g.d3},W:{g:"this.weekOfYear(date)",r:g.d02},F:{g:"this.monthNames[date.getMonth()]",r:e.monthNames.join("|"),p:"m=parseInt(this.monthNumbers[result.substring(0,3)],10)"},m:{g:"this.pad(date.getMonth()+1)",r:g.d2,p:g.p("m")+"-1"},M:{g:"this.monthShortNames[date.getMonth()]",r:e.monthShortNames.join("|"),p:"m=parseInt(this.monthNumbers[result],10)"},n:{g:"(date.getMonth()+1)",r:g.d2,p:g.p("m")+"-1"},t:{g:"this.daysInMonth(date)",r:g.d2},L:{g:"(this.isLeapYear(date) ? 1 : 0)",r:"0|1"},Y:{g:"date.getFullYear()",r:g.d04,p:g.p("y")},y:{g:"(''+date.getFullYear()).substring(2, 4)",r:g.d2,p:"var ty=parseInt(result, 10);y=ty>y2kYear?1900+ty:2000+ty"},a:{g:"(date.getHours()<12?'am':'pm')",r:"am|pm",p:"if(result==='am'){if(h===12){h=0;}}else{if(h<12){h+=12;}}"},A:{g:"(date.getHours()<12?'AM':'PM')",r:"AM|PM",p:"if(result==='AM'){if(h===12){h=0;}}else{if(h<12){h+=12;}}"},g:{g:"((date.getHours() %12)?date.getHours()%12:12)",r:g.d2,p:g.p("h")},G:{g:"date.getHours()",r:g.d2,p:g.p("h")},h:{g:"this.pad((date.getHours()%12)?date.getHours()%12:12)",r:g.d2,p:g.p("h")},H:{g:"this.pad(date.getHours())",r:g.d2,p:g.p("h")},i:{g:"this.pad(date.getMinutes())",r:g.d02,p:g.p("i")},s:{g:"this.pad(date.getSeconds())",r:g.d02,p:g.p("s")},X:{g:"this.rpad(date.getMilliseconds(), 3)",r:g.d03,p:g.p("ms")},u:{g:"this.rpad(date.getMilliseconds(), 6)",r:g.d06,p:"ms=parseInt(result, 10)/1000"},O:{g:"this.GMTOffset(date)",r:"Z|[+-]\\d{2}:?\\d{2}",p:"z=this.parseTZOffset(result, 10)"},P:{g:"this.GMTOffset(date, ':')",r:"Z|[+-]\\d{2}:?\\d{2}",p:"z=this.parseTZOffset(result, 10)"},T:{g:"this.timezone(date)",r:"[A-Z]{3}"},Z:{g:"(date.getTimezoneOffset() * -60)",r:"[+-]\\d{1,5}",p:g.p("s")},q:{g:"Math.floor(date.getMonth()*4/13)+1",r:g.d1}};var a={};function d(o){try{var k,m,j="";var l=['var dt = new Date(), y=dt.getFullYear(),m=dt.getMonth(),d=dt.getDate(),h=dt.getHours(),i=dt.getMinutes(),s=dt.getSeconds(),ms=dt.getMilliseconds(),result="";'];for(k=0;k<o.length;k++){m=o[k];if(m==="\\"){if(k===o.length-1){j+="\\"}else{j+=o[k+1]}k++}else{if(i[m]){if(j.length){l.push("str=str.replace(/^"+j+"/i, '');")}if(typeof i[m].p!=="undefined"){l.push("result=str.match(/^("+i[m].r+")/i)[1];");l.push(i[m].p+";")}l.push("str=str.replace(/^"+i[m].r+"/i, '');");j=""}else{j+="\\"+m}}}l.push("return new Date(y,m,d,h,i,s,ms).getTime();");f[o]=new Function("str",l.join(""))}catch(n){TJ.log("Date: could not compile parser for format '"+o+"': "+n,"error","js.TJDate")}}function c(o){try{var k,m,j="";var l=["var str=[];"];for(k=0;k<o.length;k++){m=o[k];if(m==="\\"){if(k===o.length-1){j+="\\"}else{j+=o[k+1]}k++}else{if(i[m]){if(j.length){l.push("str.push('"+j.replace(/'/g,"\\'")+"');")}l.push("str.push("+i[m].g+");");j=""}else{j+=m}}}if(j.length){l.push("str.push('"+j.replace(/'/g,"\\'")+"');")}l.push('return str.join("");');h[o]=new Function("date",l.join(""))}catch(n){TJ.log("Date: could not compile generator for format '"+o+"': "+n,"error","js.TJDate")}}a.parse=function(m,l){if(typeof m!=="string"){throw new Error("Date: cannot parse non-string")}if(!l){l=b.SortableDateTime}for(var j in b){if(l===j){l=b[j]}}if(typeof f[l]!=="function"){d(l)}try{return f[l].call(e,m)}catch(k){TJ.log("Date: could not parse date '"+m+"': "+k,"error","js.TJDate");TJ.log(arguments.callee.toString(),"trace","js.TJDate");return 0}};a.format=function(j,m){if(!m){m=b.SortableDateTime}for(var k in b){if(m===k){m=b[k]}}if(typeof h[m]!=="function"){c(m)}try{if(!j){j=new Date()}if(typeof j!=="number"&&typeof j.getTime!=="function"){throw new Error("supplied object is not a date or number")}return h[m].call(e,j)}catch(l){TJ.log("Date: could not generate date string: "+l,"error","js.TJDate");TJ.log(h[m].toString(),"trace","js.TJDate");return"date-error"}};return a}();var TJMenu=new function(d){var c=d();var o=d();var s=d();var u=d();var k=d();var e=d();var a=d();var n=d();var j=d();var f=false;var r;var g={clickInDelay:0,clickInDuration:50,clickOutDelay:0,clickOutDuration:50,hoverInDelay:250,hoverInDuration:50,hoverOutDelay:350,hoverOutDuration:150};var i={};function l(){d(document).on("click",p).on("mouseover",m).on("menuItemSelected",b).on("menuItemActivated",q);d.fn.hideTJMenus=function(w,v){w=w||0;v=v||0;d(this).stopTJMenus().queue(function(){var x=d(this);j=j.add(x);n=n.add(x);x.animate({"null":1},v,function(){j=j.not(x)}).dequeue()}).queue(function(){var x=d(this);k=k.not(x);x.fadeOut(w,function(){n=n.not(x);e=e.add(x);h.apply(this)}).dequeue()})};d.fn.showTJMenus=function(w,v){w=w||0;v=v||0;d(this).stopTJMenus().queue(function(){var x=d(this);j=j.add(x);a=a.add(x);x.animate({"null":1},v,function(){j=j.not(x)}).dequeue()}).queue(function(){var x=d(this);e=e.not(x);x.fadeTo(w,1,function(){a=a.not(x);k=k.add(x)}).dequeue()})};d.fn.stopTJMenus=function(){var v=d(this).stop(true,false);a=a.not(v);n=n.not(v);j=j.not(v);return this};if(f){f=false;i.debug(true)}d(".tj-menu:not(.top)").hideTJMenus();k=d(".tj-menu").not(e)}function p(v){m(v,true)}function m(v,x){var B=null,F,w=d();var H=d(v.target).closest(".tj-menu, .tj-menu-item, .tj-menu-ignore");if(H.is(".tj-menu-ignore")){return B}else{if(H.is(".tj-menu-item")){var A=H.closestDescendent(".tj-menu")}else{var A=d()}}var G=H.parents(".tj-menu").addBack(".tj-menu");if(x){var z=A.length&&!A.filter(k).length,E=H.is(s);c=G.filter(function(){return(t(d(this))!="hover")});if(z||(H.is(".click")&&!E)){if(d(v.target).is("a")){v.preventDefault();B=false}}if(!E){c=c.add(A)}F=o.not(A);var D=H.is(".selected")?H.closest(".selected-parent"):H.closest(".tj-menu-item");if(s.length+D.length>0){d(document).trigger("menuItemSelected",s=D)}w=s.parents(".tj-menu")}else{F=G.filter(function(){return(t(d(this))!="click")});if(H.is(".tj-menu-item.hover")){F=F.add(A)}c=c.filter(function(){return(t(d(this))!="hover")});if(!H.is(".tj-menu")){var D=H.closest(".tj-menu-item");if(D[0]!=u[0]){u=D.length?D:d();d(document).trigger("menuItemActivated",u)}}}var C=c.add(F).add(w);var y=d(".tj-menu").not(".top").not(C);if(x){y.add(C).stopTJMenus()}else{y.filter(a).hideTJMenus(x?g.clickOutDuration/2:g.hoverOutDuration/2);C.filter(n).showTJMenus(x?g.clickInDuration/2:g.hoverInDuration/2)}y.not(n).not(j).hideTJMenus(x?g.clickOutDuration:g.hoverOutDuration,x?g.clickOutDelay:g.hoverOutDelay);C.not(a).not(j).showTJMenus(x?g.clickInDuration:g.hoverInDuration,x?g.clickInDelay:g.hoverInDelay);y.filter(e).stopTJMenus();C.filter(k).stopTJMenus();setTimeout(function(){o=F},5);return B}function b(w,v){d(".tj-menu-item").removeClass("selected selected-parent");d(v).addClass("selected").parents(".tj-menu-item").addClass("selected-parent")}function q(w,v){d(".tj-menu-item").removeClass("active active-parent");d(v).addClass("active").parents(".tj-menu-item").addClass("active-parent")}function t(v){if(!v.length){return null}else{if(v.is(".tj-menu-item.hover.click")){return"both"}else{if(v.is(".tj-menu-item.hover")){return"hover"}else{if(v.is(".tj-menu-item.click")){return"click"}}}}return t(v.parent())}function h(){var v=d(this);v.find(".tj-menu").not(":visible").hideTJMenus();v.find(".tj-menu-item").each(function(){var w=d(this);if(w.is(".selected")){w.removeClass(".selected");c=c.not(w.closest(".tj-menu")).not(w.find(".tj-menu"));d(document).trigger("menuItemSelected",s=d());return false}});c=c.not(v);o=o.not(v)}i.debug=function(v){if(arguments.length==0||!!v==f){return f}if(v){for(var w in g){g[w]=g[w]*4}r=setInterval(function(){var x=d(".tj-menu");x.css({background:"white"});a.css({background:"yellow"});n.css({background:"red"});j.filter(a).css({background:"orange"});j.filter(n).css({background:"purple"})},10)}else{for(var w in g){g[w]=g[w]/4}clearInterval(r)}return f=v};i.getSelectedItem=function(){return s};i.getActiveItem=function(){return u};d(document).ready(l);return i}(jQuery);(function(a){a.fn.closestDescendent=function(b,d){if(!b||b===""){return a()}d=d?true:false;var c=a();this.each(function(){var k=a(this);var e=[];e.push(k);while(e.length>0){var h=e.shift();var g=h.children();for(var f=0;f<g.length;++f){var j=a(g[f]);if(j.is(b)){c.push(j[0]);if(!d){return false}}else{e.push(j)}}}});return c}})(jQuery);function validateBrowser(){var b=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;var f=typeof InstallTrigger!=="undefined";var c=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0;var e=!!window.chrome&&!b;var d=false||!!document.documentMode;var a=navigator.userAgent.toLowerCase().indexOf("playbook")!=-1;return{Opera:b,Firefox:f,Safari:c,Chrome:e,IE:d,Playbook:a}};