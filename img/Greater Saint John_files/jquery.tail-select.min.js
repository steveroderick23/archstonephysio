(function(){function f(){var a=this;this.data={},this.count=0,this.tail="data-tail",this.select="data-select",this.options={single_deselect:!1,multi_limit:0,multi_show_count:!0,multi_hide_selected:!0,multi_move_to:"",width:"",height:"200px",copy_class:!1,description:!1,hide_disabled:!1,hide_on_mobile:!0,hide_on_unsupported:!0,text_empty:"No options available...",text_limit:"You can't select more options!",text_placeholder:"Select an option..."},this.mobile=this.browser(!0),this.supported=this.browser(!1),e(document).bind("mousedown keydown",function(b){"keydown"==b.type&&27==b.keyCode&&e("div.tailms-select.tailms-status-open").length>0&&a.change_status(e("div.tailms-select.tailms-status-open").attr(a.tail),"close"),"mousedown"==b.type&&!e(b.target).closest("div.tailms-select").length&&e("div.tailms-select.tailms-status-open").length>0&&a.change_status(e("div.tailms-select.tailms-status-open").attr(a.tail),"close")})}var e,d;f.prototype.browser=function(h){if(h!==!0){if(-1!==navigator.appVersion.search(/MSIE /)){var k=navigator.appVersion.length,j=navigator.appVersion.search(/MSIE /),i=navigator.appVersion.slice(j,k).replace(/MSIE /,"");if(i=i.split("."),i=1*i[0],isNaN(i)===!1&&i>=8){return !0}}if(-1!==navigator.userAgent.search(/MSIE /)){var k=navigator.userAgent.length,j=navigator.userAgent.search(/MSIE /),i=navigator.userAgent.slice(j,k).replace(/MSIE /,"");if(i=i.split("."),i=1*i[0],isNaN(i)===!1&&i>=8){return !0}}if(-1!==navigator.userAgent.search(/OPR\//)){var k=navigator.userAgent.length,j=navigator.userAgent.search(/OPR\//),i=navigator.userAgent.slice(j,k).replace(/OPR\//,"");if(i=i.split("."),i=1*i[0],isNaN(i)===!1&&i>=15){return !0}}if(-1!==navigator.userAgent.search(/Firefox\//)){var k=navigator.userAgent.length,j=navigator.userAgent.search(/Firefox\//),i=navigator.userAgent.slice(j,k).replace(/Firefox\//,"");if(i=i.split("."),i=1*i[0],isNaN(i)===!1&&i>=5){return !0}}if(-1!==navigator.userAgent.search(/Chrome\//)){var k=navigator.userAgent.length,j=navigator.userAgent.search(/Chrome\//),i=navigator.userAgent.slice(j,k).replace(/Chrome\//,"");if(i=i.split("."),i=1*i[0],isNaN(i)===!1&&i>=17){return !0}}return !1}try{return document.createEvent("TouchEvent"),!0}catch(g){return !1}},f.prototype.register=function(a,l){if("undefined"!==typeof e(a).attr(this.select)||!e(a).is("select")){return !1}var k="select_"+this.count,j=e.extend({multiple:!1},this.options);for(var i in j){"undefined"!==typeof l&&l.hasOwnProperty(i)&&typeof l.key===typeof j.key&&(j[i]=l[i])}if("undefined"!==typeof e(a).attr("data-placeholder")&&(j.text_placeholder=e(a).attr("data-placeholder")),"undefined"!==typeof e.prop?("multiple"===e(a).prop("multiple")||e(a).prop("multiple")===!0)&&(j.multiple=!0):("multiple"===e(a).attr("multiple")||e(a).attr("multiple")===!0||"string"===typeof e(a).attr("multiple"))&&(j.multiple=!0),j.hide_on_mobile===!0&&this.mobile===!0){return !1}if(j.hide_on_unsupported===!0&&this.supported===!1){return !1}e(a).attr(this.select,k),e(a).hide();var h={};return h[k]={selector:e("select["+this.select+"='"+k+"']"),options:j,objects:{},items:{}},e.extend(this.data,h),this.count++,this.create(k),this.bind(k),h[k].selector.trigger("tailSelect:ready",[k,h[k].selector,h[k]]),h[k].selector},f.prototype.create=function(a){var h=this.data[a],g=h.options;return h.objects.select=e("<div />"),h.objects.select.attr(this.tail,a),h.objects.select.addClass("tailms-select"),g.copy_class===!0&&h.objects.select.addClass(h.selector.attr("class")),g.description===!0&&h.objects.select.addClass("tailms-with-descriptions"),h.objects.select.addClass(1==g.multiple?"tailms-multiple":"tailms-single"),0==g.multiple&&g.single_deselect===!0&&h.objects.select.addClass("tailms-allow-deselect"),"undefined"===typeof trim?""!==g.width.replace(/^\s+|\s+$/g,"")&&h.objects.select.css("width",g.width):g.width.trim()!==!1&&h.objects.select.css("width",g.width),h.objects.container=e("<div />"),h.objects.container.addClass("tailms-option-container"),h.objects.container.prepend(e("<ul />",{"class":"tailms-active-list"})).hide(),h.objects.input=e("<div />"),h.objects.input.addClass("tailms-input"),h.objects.list=e("<ul />"),h.objects.list.addClass("tailms-option-list").hide(),h.objects.list.css("height","auto"),h.objects.list.css("max-height","0px"),h.objects.placeholder=e("<span />").addClass("tailms-input-placeholder"),h.objects.placeholder.text(g.text_placeholder),g.multiple===!0&&g.multi_show_count===!0&&(h.objects.placeholder.text(0===g.multi_limit?"(0) "+g.text_placeholder:"(0/"+g.multi_limit+") "+g.text_placeholder),h.objects.text),h.objects.puller=e("<span />"),h.objects.puller.addClass("tailms-input-puller"),h.objects.list.prependTo(h.objects.input),h.objects.placeholder.prependTo(h.objects.input),h.objects.puller.prependTo(h.objects.input),h.objects.input.prependTo(h.objects.select),h.objects.container.prependTo(h.objects.select),e(h.selector).after(h.objects.select),this.reload(a)},f.prototype.reload=function(a){for(var n=this.data[a],m=e(n.selector).clone(),l={},k=0;k<e(m).find("option").length;k++){var j=e(m).find("option").eq(k),i=!1;l[k]={label:"",value:"",group:!1,number:k,description:"",selected:!1,disabled:!1},l[k].label=e(j).text(),l[k].value="undefined"!==typeof e(j).attr("value")?e(j).attr("value").replace(/"/g,"").replace(/'/g,""):l[k].label.replace(/"/g,"").replace(/'/g,""),e(n.selector).find("option").eq(k).attr("data-option",k),e(j).parent().is("optgroup")&&"undefined"!==typeof e(j).parent().attr("label")&&(l[k].group=e(j).parent().attr("label")),"undefined"!==typeof e(j).attr("data-description")&&(l[k].description=e(j).attr("data-description").replace(/"/g,"").replace(/'/g,"")),("undefined"!==typeof e.prop&&e(j).prop("disabled")===!0||e(j).attr("disabled")===!0)&&(l[k].disabled=!0),("undefined"!==typeof e.prop&&(e(j).prop("selected")===!0||e(n.selector).val()==e(j).attr("value"))||e(j).attr("selected")===!0)&&(0==n.options.multiple?(0==i?l[k].selected=!0:e(n.selector).find("option").eq(k).removeAttr("selected"),i=!0):l[k].selected=!0)}return n.items=l,e.isEmptyObject(l)?this.action_empty(a):this.render_list(a,l)},f.prototype.render_list=function(a,n){var m=this.data[a],l=e(m.objects.list);e(l).children("li").length>0&&e(l).children("li").remove();var k="",j="";e.each(n,function(){var q=e("<li />").addClass("tailms-option");q.attr("data-value",this.value),q.attr("data-number",this.number),q.attr("data-disabled","false"),q.attr("data-selected","false");var p=e("<span />").addClass("tailms-option-label");if(p.text(this.label).appendTo(q),m.options.description===!0&&""!==this.description){var o=e("<span />").addClass("tailms-description");o.text(this.description).appendTo(q)}if(this.group!==!1){if(this.group!==k){var g=e("<li />").addClass("tailms-optgroup");g.attr("data-label",this.group);var b=e("<span />").addClass("tailms-optgroup-label");b.text(this.group).appendTo(g),j=e("<ul />").addClass("tailms-option-sublist"),j.appendTo(g),k=this.group,e(l).append(g)}e(j).append(q)}else{e(l).append(q)}});var i=this;e.each(n,function(){var b=e(l).find("li[data-number="+this.number+"]");this.disabled===!0&&i.action_disable(a,b),this.selected===!0&&i.action_select(a,b)})},f.prototype.bind=function(a){var h=this,g=this.data[a];e(g.objects.input).bind("mousedown",{id:a},function(c){1===c.which&&e(c.target).is("div.tailms-input, span.tailms-input-placeholder, span.tailms-input-puller")&&(c.preventDefault(),h.change_status(c.data.id,"open",!1))}),e(g.objects.list).find("li.tailms-option").bind("click",{id:a},function(b){b.preventDefault(),h.change_status(b.data.id,"select",this)}),"container"===g.options.multi_move_to&&e(g.objects.container).find(".tailms-deselect").bind("click",{id:a},function(b){b.preventDefault(),h.change_status(b.data.id,"deselect",this)}),"object"===typeof e.event.special.mousewheel&&e(g.objects.list).bind("mousewheel",function(i,l){var k=e(this).height(),j=e(this).get(0).scrollHeight;(this.scrollTop===j-k&&l<0||0===this.scrollTop&&l>0)&&i.preventDefault()})},f.prototype.change_status=function(t,s,r){var q=this.data[t];if("open"==s){if(e(q.objects.select).hasClass("tailms-status-open")){e(q.objects.list).css("max-height","0px"),e(q.objects.list).hide(),e(q.objects.select).removeClass("tailms-status-open")}else{e(".tailms-select").hasClass("tailms-status-open")&&(e(".tailms-select").find(".tailms-option-list").css("max-height","0px"),e(".tailms-select").find(".tailms-option-list").hide(),e(".tailms-select").removeClass("tailms-status-open"));var p="",o="200px";if("undefined"===typeof trim){if(""!==q.options.height.replace(/^\s+|\s+$/g,"")){var o=q.options.height.split("")}}else{if(q.options.height.trim()!==!1){var o=q.options.height.split("")}}for(var n=0;n<o.length;n++){var m=o[n];isNaN(m)||(p+=m)}p=1*p;var l=e(q.objects.input).offset().top+e(q.objects.input).outerHeight()+p,a=e(window).height()+e(window).scrollTop()-20;a<=l?e(q.objects.list).hasClass("tailms-view-top")||e(q.objects.list).addClass("tailms-view-top"):e(q.objects.list).hasClass("tailms-view-top")&&e(q.objects.list).removeClass("tailms-view-top"),e(q.objects.list).css("max-height",o.join("")),e(q.objects.list).show(),e(q.objects.select).addClass("tailms-status-open")}}"close"==s&&(e(q.objects.list).css("max-height","0px"),e(q.objects.list).hide(),e(q.objects.select).removeClass("tailms-status-open")),"select"==s&&("false"==e(r).attr("data-selected")?this.action_select(t,r):(q.options.multiple!==!1||q.options.single_deselect!==!1)&&this.action_deselect(t,r)),"deselect"==s&&this.action_deselect(t,r)},f.prototype.action_select=function(a,n){if(!this.is_limit(a)&&"true"!==e(n).attr("data-disabled")&&"true"!==e(n).attr("data-selected")){var m=this.data[a],l=this;m.options.multiple===!1&&e(m.objects.list).find("li[data-selected='true']").length>0&&e.each(e(m.objects.list).find("li[data-selected='true']"),function(b){l.action_deselect(a,e(this).eq(b))});var k=e(m.selector).find("option[data-option='"+e(n).attr("data-number")+"']");if("undefined"!==typeof e.prop&&e(k).prop("selected",!0),e(k).attr("selected",!0),e(k).attr("selected","selected"),e(n).addClass("tailms-selected").attr("data-selected","true"),m.options.multiple===!0&&("top"===m.options.multi_move_to||"container"===m.options.multi_move_to)){var j=e("<li />").addClass("tailms-option-dummy");if(j.attr("data-holder",e(n).attr("data-number")),j.hide().insertAfter(e(n)),e(n).parent("ul").parent("li.tailms-optgroup").length>0){if(m.options.hide_disabled===!0){var i=e(n).parent("ul").children("li[data-selected='false'][data-disabled='false']").length}else{var i=e(n).parent("ul").children("li[data-selected='false']").length}0==i&&e(n).parent("ul").parent(".tailms-optgroup").hide()}"top"===m.options.multi_move_to&&e(n).prependTo(e(m.objects.list)),"container"===m.options.multi_move_to&&("none"==e(m.objects.container).css("display")&&e(m.objects.container).show(),e(n).append(e("<span />",{"class":"tailms-close"})).appendTo(e(m.objects.container).children("ul.tailms-active-list")))}this.action_empty(a),this.action_placeholder(a,n),e(m.selector).trigger("tailSelect:change",[e(n),"selected",e(k)])}},f.prototype.action_deselect=function(a,j){if("true"!==e(j).attr("data-disabled")&&"false"!==e(j).attr("data-selected")){var i=this.data[a];if(i.options.multiple===!0&&("top"===i.options.multi_move_to||"container"===i.options.multi_move_to)){var h=e(i.objects.list).find("li[data-holder='"+e(j).attr("data-number")+"']");e(h).parent("ul").parent("li.tailms-optgroup").length>0&&"none"===e(h).parent("ul").parent("li.tailms-optgroup").css("display")&&e(h).parent("ul").parent("li.tailms-optgroup").show(),e(j).insertAfter(e(h)),e(h).remove(),"container"===i.options.multi_move_to&&(e(j).children("span.tailms-close").remove(),0==e(i.objects.container).find("li").length&&e(i.objects.container).hide())}var g=e(i.selector).find("option[data-option='"+e(j).attr("data-number")+"']");"undefined"!==typeof e.prop&&e(g).prop("selected",!1),e(g).removeAttr("selected"),e(j).removeClass("tailms-selected"),e(j).attr("data-selected","false"),i.options.multiple===!1&&0==e(i.selector).find("option[selected='selected']").length&&(e(i.selector).selectedIndex=-1,e(i.selector).val([])),this.action_empty(a),this.action_placeholder(a,j),e(i.selector).trigger("tailSelect:change",[e(j),"deselected",e(g)])}},f.prototype.action_enable=function(a,i){if("false"!==e(i).attr("data-disabled")){var h=this.data[a],g=e(h.selector).find("option[data-option='"+e(i).attr("data-number")+"']");e(g).removeAttr("disabled"),e(i).removeClass("tailms-disabled"),e(i).attr("data-disabled","false"),e(i).parent("ul").parent("li.tailms-optgroup").length>0&&"none"===e(i).parent("ul").parent("li.tailms-optgroup").css("display")&&e(i).parent("ul").parent("li.tailms-optgroup").show(),h.options.hide_disabled===!0&&e(i).show(),this.action_empty(a),this.action_placeholder(a,i),e(h.selector).trigger("tailSelect:change",[e(i),"enabled",e(g)])}},f.prototype.action_disable=function(a,j){if("undefined"!==typeof e(j).attr("data-number")&&"true"!==e(j).attr("data-disabled")){var i=this.data[a],h=e(i.selector).find("option[data-option='"+e(j).attr("data-number")+"']");if(e(h).attr("disabled",!0),e(h).attr("disabled","disabled"),e(j).addClass("tailms-disabled"),e(j).attr("data-disabled","true"),e(h).removeAttr("selected"),e(j).removeClass("tailms-selected"),e(j).attr("data-selected","false"),e(j).parent("ul").parent("li.tailms-optgroup").length>0){if(i.options.hide_disabled===!0){var g=e(j).parent("ul").children("li[data-selected='false'][data-disabled='false']").length}else{var g=e(j).parent("ul").children("li[data-selected='false']").length}0==g&&e(j).parent("ul").parent(".tailms-optgroup").hide()}i.options.hide_disabled===!0&&e(j).hide(),this.action_empty(a),this.action_placeholder(a,j),e(i.selector).trigger("tailSelect:change",[e(j),"disabled",e(h)])}},f.prototype.action_empty=function(a){var j=this.data[a],i=j.objects.list;if(j.options.hide_disabled===!0){var h=e(i).find("li.tailms-option[disabled='true']").length}else{var h=e(i).find("li.tailms-option").length}if(0===h){if(0==e(i).find("li.tailms-option-empty").length){var g=e("<li />",{"class":"tailms-option-empty"}).text(j.options.text_empty);e(i).append(g)}e(j.selector).trigger("tailSelect:empty")}else{0!=e(i).find("li.tailms-option-empty").length&&e(i).find("li.tailms-option-empty").remove()}},f.prototype.action_placeholder=function(a,l){var k=this.data[a];if(k.options.multiple===!0){var j="",i=k.options.multi_limit,h=e(k.selector).find("option:selected").length;k.options.multi_show_count&&(j+="("+h,0!==i&&(j+="/"+i),j+=") "),0!==i&&h>=i?(j+=k.options.text_limit,e(k.objects.select).addClass("tailms-status-limit"),e(k.selector).trigger("tailSelect:limit",[h,i])):(j+=k.options.text_placeholder,e(k.objects.select).removeClass("tailms-status-limit")),e(k.objects.placeholder).text(j)}else{e(k.objects.placeholder).text("true"===e(l).attr("data-selected")?e(l).children("span.tailms-option-label").text():k.options.text_placeholder)}},f.prototype.action_remove=function(a){var g=this.data[a];return e(g.objects.select).remove(),e(g.selector).removeAttr(this.select),e(g.selector).show(),delete this.data[a],this.count--,!0},f.prototype.is_limit=function(a){var i=this.data[a];if(i.options.multiple===!1||0===i.options.multi_limit){return !1}var h=i.options.multi_limit,g=e(i.selector).find("option:selected").length;return g>=h?!0:!1},f.prototype.functions=function(a,p,o,n){if(-1==e.inArray(p,["enable","disable","open","close","register","reload","remove"])){return !1}if("register"===p){if("undefined"!==typeof e(a).attr(this.select)){return !1}this.register(a,o)}var m=e(a).attr(this.select);if("undefined"===typeof m||this.data.hasOwnProperty(m)===!1){return !1}var l=this.data[m];if("open"===p||"close"===p){return this.change_status(m,p,!1),!0}if(("enable"===p||"disable"==p)&&("value"==o||"number"==o||"all"==o)&&("value"==o||"number"==o?"string"===typeof n&&(n=[n]):(o="number",n=[],e.each(e(l.objects.list).find("li.tailms-option"),function(c){n[c]=e(this).attr("data-number")})),e.isArray(n))){for(var k,j=0;j<n.length;j++){"value"==o&&n[j].replace(/"/g,"").replace(/'/g,""),k=e(l.objects.list).find("li.tailms-option[data-"+o+"='"+n[j]+"']"),"undefined"!==typeof k&&("enable"==p&&this.action_enable(m,k),"disable"==p&&this.action_disable(m,k))}return !0}if("remove"===p){return this.action_remove(m),!0}if("reload"===p){var k=e.extend({},l.options);return this.action_remove(m),this.register(a,k)}return !1},e=jQuery,e.fn.extend({tailSelect:function(j,i,c){var b,a;return this.length>1&&(b={}),this.each(function(g){"undefined"==typeof d&&(d=new f),a="undefined"==typeof j||"object"==typeof j?d.register(this,j):e.inArray(j,["enable","disable","open","close","register","reload","remove"])>-1?d.functions(this,j,i,c):!1,"object"==typeof b?b["element_"+g]=a:b=a,e(this).trigger("tailSelect:ready")}),b}})}).call(this);